<!doctype html><html lang=en><head><script async src=//static.getclicky.com/101389223.js></script><noscript><p><img alt=Clicky width=1 height=1 src=//in.getclicky.com/101389223ns.gif></p></noscript><title>Setting up a Virtual Environment and VS Code for Kedro</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=referrer content="origin"><meta name=description content="For the fine bits between the pickles Adding nutricious solutions to tech teams and R&D projects "><meta name=generator content="Hugo 0.108.0"><link rel=stylesheet href=/css/main.min.f9a68333f1ac16f57078dbd146ef8add8f31bd961ec7aa2ddf587475cf7562ffffb638dc7b161cd0403f123bc73207f80514e8c6b7f24c8d44853206072cf9fd.css integrity="sha512-+aaDM/GsFvVweNvRRu+K3Y8xvZYex6ot31h0dc91Yv//tjjcexYc0EA/EjvHMgf4BRToxrfyTI1EhTIGByz5/Q=="><noscript><link rel=stylesheet href=/css/noscript.min.e6f1ba19697eecfddfbf83ff7181b98181998f163d7005f6ae923451556bf85bef357f43dffe1522b92c1efab7fb38441f479e39b7a03e4313a8ef12b0b01f65.css integrity="sha512-5vG6GWl+7P3fv4P/cYG5gYGZjxY9cAX2rpI0UVVr+FvvNX9D3/4VIrksHvq3+zhEH0eeObegPkMTqO8SsLAfZQ=="></noscript><meta name=twitter:card content="summary"><meta name=twitter:title content="Setting up a Virtual Environment and VS Code for Kedro"><meta name=twitter:description content="Guide how to create a virtual environment with venv, install Kedro and set up VS Code."><meta property="og:title" content="Setting up a Virtual Environment and VS Code for Kedro"><meta property="og:description" content="Guide how to create a virtual environment with venv, install Kedro and set up VS Code."><meta property="og:type" content="article"><meta property="og:url" content="https://picklejuicedev.github.io/posts/quick_kedro_setup/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-12-08T00:00:00+00:00"><meta property="article:modified_time" content="2022-12-08T00:00:00+00:00"></head><body class="landing is-preload"><div id=page-wrapper><header id=header><h1><a href=https://picklejuicedev.github.io/><img src=../../images/icon_dark.png width=35 style=vertical-align:middle>
<span style=vertical-align:top>picklejuice</span></a></h1><nav id=nav><ul><li class=special><a href=#menu class=menuToggle><span>Menu</span></a><div id=menu><ul><li><a href=/>Home</a></li><li><a href=/posts/>Posts</a></li><li><a href=/aboutme/>About</a></li></ul></div></li></ul></nav></header><article id=main><header><h2>Setting up a Virtual Environment and VS Code for Kedro</h2></header><section class="wrapper style5"><div class=inner><p>Utilising best software engineering practice with Kedro starts with setting up a virtual environment and an IDE to work with.</p><p>This short guide shows you how to get started with Python&rsquo;s built in venv environment manager together with VS Code to have a Kedro project set up in no time.</p><p>I am assuming you have Python 3.7 or greater and VS Code installed. I am using Windows for the prompt examples, for macs/linux replace <code>python</code> with <code>python3</code> most other commands should be pretty similar - your prompt will look a bit different too. For some distributions you may also need to install venv separatly.</p><h2 id=a-virtual-environment>A Virtual Environment</h2><p>Working with Python can get really painful when you have multiple projects requiring different packages to work correctly. For example project A needs pandas version 1.4.1 but project B uses version 1.5.2, if you use a global Python installation then you will have to chose one of the 2 pandas versions, so only a single project will work correctly. This is where virtual environments help.</p><p>The most common environment managers are Python&rsquo;s built in venv, poetry and conda, but there are quite a few more. If you are working in a team, then you should all use the same environment manager as they can interfere with each other and this way you can also prebuilt common environments. The basic idea how they work is mostly the same: It creates a new folder where all the environment specific files live, you then need to activate the environment or tell your IDE (Integrated Development Environment) which one it should use. Some, like poetry and conda also include a copy of the actual python runtime, venv only manages the dependencies you install.</p><p>Let&rsquo;s dive in, first we will create a project folder:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>C:\code&gt;mkdir example-project
</span></span><span style=display:flex><span>C:\code&gt;cd example-project
</span></span></code></pre></div><p>Now we can create a virtual environment in it:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>C:\code\example-project&gt;python -m venv .venv
</span></span></code></pre></div><p>This will be busy for a little while, but when completed you will see that it has create a new folder with the name <code>.venv</code>. it contains all the modules you will install specifically for this project. You can give it any name you like, but <code>.venv</code> is very common.</p><p>Next we will activate it by calling the <code>activate</code> script in the <code>Scripts</code> folder:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>C:\code\example-project&gt;<span style=color:#e6db74>&#34;.venv/Scripts/activate&#34;</span>
</span></span></code></pre></div><p>and for Mac users:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>source .venv/bin/activate
</span></span></code></pre></div><p>Now your prompt will have changed and show <code>.venv</code> indicating that the environment is active.</p><h2 id=setting-up-kedro-and-a-new-project>Setting up Kedro and a new project</h2><p>Next we will install Kedro using pip into our environment:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>(.venv) C:\code\example-project&gt;pip install kedro
</span></span></code></pre></div><p>You can check that it has successfully installed like so:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>(.venv) C:\code\example-project&gt;kedro info
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> _            _
</span></span><span style=display:flex><span>| | _____  __| |_ __ ___
</span></span><span style=display:flex><span>| |/ / _ \/ _` | <span style=color:#960050;background-color:#1e0010>&#39;</span>__/ _ \
</span></span><span style=display:flex><span>|   &lt;  __/ (_| | | | (_) |
</span></span><span style=display:flex><span>|_|\_\___|\__,_|_|  \___/
</span></span><span style=display:flex><span>v0.18.4
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Kedro is a Python framework <span style=color:#66d9ef>for</span>
</span></span><span style=display:flex><span>creating reproducible, maintainable
</span></span><span style=display:flex><span>and modular data science code.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>No plugins installed
</span></span></code></pre></div><p>To create a new project:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>(.venv) C:\code\example-project&gt;kedro new
</span></span></code></pre></div><p>And when prompted give your project a name, i.e. <code>kedro-project</code></p><p>This will create a new folder inside your original folder and creates all the templates for the project. Change into the `kedro-project&rsquo; folder:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>(.venv) C:\code\example-project&gt;cd kedro-project
</span></span></code></pre></div><p>The last step here is to install all the packages the project needs:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>(.venv) C:\code\example-project\kedro-project&gt;pip install -r src/requirements.txt
</span></span></code></pre></div><p>Hopefully that completed without errors, so let&rsquo;s jump into VS Code to get this set up.</p><h2 id=setting-up-vs-code>Setting up VS Code</h2><p>As we are already in the right folder simply start VS Code via (don&rsquo;t forget the <code>.</code>):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span>(.venv) C:\code\example-project\kedro-project&gt;code .
</span></span></code></pre></div><p>VS Code will open with your project as workspace:</p><p><img src=/images/vscode_workspace.png alt=image-20221207114720060></p><h3 id=configure-your-interpreter>Configure your Interpreter</h3><p>Let&rsquo;s first set up the Python Interpreter to use our virtual environment:</p><p>Go to <code>View - Command Pallette</code> or use <code>ctrl + shift + P</code>, then search for <code>Python: Select Interpreter</code>:</p><p><img src=/images/vscode_interpreter.png alt=image-20221207115149745></p><p>You may already have some interpreters listed here, click on <code>+ Enter interpreter path...</code>, then use <code>Find..</code> to navigate back up to the project parent folder, into then select <code>.venv/Scripts/Python.exe</code></p><p>To confirm, select the file <code>src/setup.py</code> and you will see your environment listed in the bottom right:</p><p><img src=/images/vscode_confirm_interpreter.png alt=image-20221207115734090></p><p>Now that the interpreter is configured correctly you can easily run a command line inside VS code. Unselect any items in the explorer on the left and then right-click and <code>open in Integrated Terminal</code>. This will open a new terminal already linked to your virtual environment. You can run Kedro commands straight from there:</p><p><img src=/images/VSCodeTerminal.gif alt=Terminal></p><p>The next steps are optional, but still worth doing as they make developing a lot easier.</p><h3 id=set-up-linting-and-auto-formatting>Set up Linting and Auto-Formatting</h3><p>If you haven&rsquo;t yet installed the <a href="https://marketplace.visualstudio.com/items?itemName=ms-python.python">Python extension</a>, please do that first thing. it will install <code>pylance</code>as language server for Python. We have already installed <code>flake8</code>, <code>black</code>and <code>isort</code> via <code>requirements.txt</code> so let&rsquo;s see what they do and how to configure them.</p><p>These tools statically analyse your code and make suggestions how to improve it, so you have a consistent style throughout your codebase. Why? As we read code a lot more than writing it, we want to make sure all code looks the same and follows the same rules. Easier on your eyes and your colleagues.</p><p>Here some code that runs ok, but doesn&rsquo;t conform to standard rules of indentation, whitespaces etc.</p><p><img src=/images/vscode_ugly_code.png alt=image-20221207122953493></p><p>Now let&rsquo;s see what <code>flake8</code> makes of this code:</p><p><img src=/images/vscode_ugly_code_linted.png alt=image-20221207123052198></p><p>As you can see, quite a few things not up to scratch. To enable linting, go to your Command Palette (<code>ctrl + shift+ P</code> ) and select <code>Python: Select Linter</code>. Choose <code>flake8</code>.</p><p>So we could now use the comments to fix those formatting problems, but we can do better by automatically triggering <code>black</code> to do that job for us when saving. Go to Settings and find <code>Python > Formatting Provider</code> and set it to <code>black</code></p><p><img src=/images/vscode_settings_black.png alt=image-20221207123707825></p><p>Next, find <code>Editor: Format on Save</code> and enable it. Now let&rsquo;s see what happens on saving the file:</p><p><img src=/images/FormatOnSave.gif alt="Format on Save"></p><p>Much better! Now that it is set up, just investigate red and yellow squiggly lines to learn coding best practice. Don&rsquo;t just ignore it - fix it!</p><p>You may have seen that in the Settings dialog there is a <code>User</code> and a <code>Workspace</code> tab. Depending which one you change a setting in, it will apply globally to all VS Code workspaces or just the one your are in, so bear that in mind when setting them up.</p><h2 id=conclusion>Conclusion</h2><p>These are the basics to set you up for working with Kedro and create maintainable data science pipelines based on software engineering best practice. We have created a virtual environment to isolate projects from sharing the same dependencies and packages. Then we have set up our IDE to run this environment, installed all required packages, and set up linting and formatting.</p><p>Why not convert some Jupyter Notebooks into Kedro Pipelines next?</p><p>If you want to dive deeper into virtual environments, there are a ton of guides and tutorials out there. Just note that it gets pretty technical very quickly. There is also a lot more you can do in VS code such as set up Debugging, customise auto-complete to help with project settings files or use the built in git client. If you like this guide, leave a comment and which one of those you would like to learn more about.</p></div></section></article><footer id=footer><ul class=icons><li><a href=mailto:sean@pickle-juice.co.uk class="icon fa-envelope-o"><span class=label>Email</span></a></li></ul><ul class=copyright><li>&copy; 2022 picklejuice</li><li>Design: <a href=http://html5up.net>HTML5 UP</a></li></ul></footer></div><script src=/js/bundle.min.e782e74b6a26b3617d7b8d54226975384ec8c8ea308372a74df0ab1963ec7e41b87330abd1910eec69ef09bdf08a12bf1bcb5321cc4077c8d0a6c00825fc56b5.js integrity="sha512-54LnS2oms2F9e41UIml1OE7IyOowg3KnTfCrGWPsfkG4czCr0ZEO7GnvCb3wihK/G8tTIcxAd8jQpsAIJfxWtQ=="></script></body></html>